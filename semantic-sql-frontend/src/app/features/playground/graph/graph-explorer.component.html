<div class="container mx-auto p-6 h-full flex flex-col">
    <div class="mb-4">
        <h1 class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-blue-400">
            Graph Explorer
        </h1>
        <p class="text-gray-400">Visualize relationships between tables (JOIN paths)</p>
    </div>

    <div class="bg-[#141a23] p-4 rounded-xl border border-gray-700 shadow-lg mb-4 flex gap-4 items-end">
        <mat-form-field class="w-1/4" appearance="outline">
            <mat-label>Datasource Slug</mat-label>
            <input matInput [(ngModel)]="datasourceSlug" placeholder="e_commerce_db" class="text-white">
        </mat-form-field>

        <div class="flex-1">
            <label class="block text-xs font-semibold text-gray-400 mb-1">Anchor Entities (Space separated
                tables)</label>
            <input
                class="w-full px-4 py-3 rounded-lg border border-gray-600 bg-[#1e293b] text-gray-100 focus:ring-2 focus:ring-purple-500 outline-none placeholder-gray-500"
                [(ngModel)]="anchorInput" (keyup.enter)="visualize()" placeholder="e.g., users orders products">
        </div>

        <button mat-flat-button color="primary" class="h-[52px]" (click)="visualize()">
            VISUALIZE
        </button>
    </div>

    <!-- Graph Container -->
    <div
        class="flex-1 bg-[#0f1218] rounded-lg border border-gray-800 shadow-inner overflow-hidden relative min-h-[500px]">
        <vflow [nodes]="nodes" [edges]="edges" [background]="{ type: 'dots', color: '#1e293b', gap: 20 }">
            <!-- Custom Templates can be added here if needed -->
        </vflow>

        <div *ngIf="loading" class="absolute inset-0 flex items-center justify-center bg-black/50 z-10">
            <mat-spinner diameter="40"></mat-spinner>
        </div>
    </div>
</div>